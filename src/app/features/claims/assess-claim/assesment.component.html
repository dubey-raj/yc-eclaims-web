<form [formGroup]="claimAssessmentForm" (ngSubmit)="onSubmit()">
    <div class="row">
        <div class="col-sm-12">
            <div class="card">
                <div class="card-body">
                    <h4>Claim Number - {{ claim?.claimNumber }}</h4>
                    <hr />
                    <div class="row">
                        <div class="col-md-4">
                            <p><strong>Vehicle Number: {{ claim?.vehicleNumber }}</strong></p>
                        </div>
                        <div class="col-md-4">
                            <p><strong>Incident Date:</strong> {{ claim?.incidentDate }}</p>
                        </div>
                        <div class="col-md-4">
                            <p><strong>Location:</strong> {{ claim?.incidentLocation }}</p>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-4">
                            <p><strong>Submitted At:</strong> {{ claim?.submittedAt | date }}</p>
                        </div>
                        <div class="col-md-2">
                            <p><strong>Description:</strong></p>
                        </div>
                        <div class="col-md-6">
                            <p>{{ claim?.incidentDescription }}</p>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-2">
                            <p><strong>Documents:</strong></p>
                        </div>
                        <div class="col-md-10">
                            <ul class="list-inline">
                                <li class="list-inline-item" *ngFor="let url of claim?.documentUrls; let i = index">
                                    <a href="{{ url }}" target="_blank"><i class="feather icon-file-text"></i> {{ i+1
                                        }}</a>
                                </li>
                            </ul>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-group">
                                <label for="inspectionDate">Inspection Date</label>
                                <input type="date" class="form-control" id="inspectionDate"
                                    formControlName="inspectionDate" [max]="maxDate">
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <label for="assessmentNotes">Assessment Notes</label>
                                <textarea class="form-control" id="assessmentNotes" rows="4"
                                    formControlName="assessmentNotes"
                                    placeholder="Describe inspection findings, damages, conditions, etc."></textarea>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <label for="damageEstimate">Estimated Damage Cost (₹)</label>
                                <input type="number" class="form-control" id="damageEstimate"
                                    formControlName="damageEstimate" min="0">
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-group mt-3">
                                <label for="claimStatus">Claim Status</label>
                                <select class="form-control" id="claimStatus" formControlName="claimStatus">
                                    <option value="">Select Status</option>
                                    <option value="Approved">Approved</option>
                                    <option value="Rejected">Rejected</option>
                                    <option value="Need More Info">Need More Info</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <label for="supportingFiles">Upload Supporting Documents (PDF, Images)</label>
                                <input type="file" class="form-control" id="supportingFiles"
                                    (change)="onFileUpload($event)" multiple accept=".pdf,image/*">
                            </div>
                        </div>
                        <div *ngFor="let file of selectedFiles; let i = index" class="col-md-4 mt-2">
                            <div class="d-flex align-items-center" [title]="file.name">
                                <i class="feather icon-file-text text-secondary me-2"></i>
                                <span class="text-truncate d-inline-block" style="max-width: 200px;">
                                    {{ file.name.length > 20 ? (file.name | slice:0:20) + '…' : file.name }}
                                </span>
                            </div>
                            <button class="btn btn-sm btn-outline-primary mt-1"
                                (click)="previewAssessmentFile(i, $event)">
                                <i class="feather icon-eye"></i> Preview
                            </button>
                        </div>
                    </div>
                    <button type="submit" class="btn btn-primary" [disabled]="claimAssessmentForm.invalid">
                        Submit Assessment
                    </button>
                </div>
            </div>
        </div>
    </div>
</form>